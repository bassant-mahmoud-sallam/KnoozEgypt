@if (commentsList) {
  <section class="flex flex-col gap-4 mt-2 mb-12 mx-auto py-0 px-8 md:w-[80%]">
    <div class="flex flex-col gap-3 comment">
        @for (comment of commentsList; track comment.id) {
          <!-- comment -->
          <div class="bg-gray-100 p-4 rounded-md border">

            <div class="flex items-center gap-2">

              <img [src]="comment.user.profile_image || '/images/defaultprofile2.png'" alt="" class="w-8 h-8 rounded-full">
              <h3 class="font-bold">{{comment.user.name}}</h3>
              <span class="text-gray-600 text-sm">{{comment.created_at}}</span>

              <!-- Delete icon (only for my comment(main user)) -->
              @if (isMyComment(comment)) {
                <button
                  (click)="deleteComment(comment.id)"
                  class="text-[#2b2156] hover:text-red-700 ms-auto"
                  aria-label="Delete comment"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              }

            </div>


            <p class="text-gray-600 mt-4 font-medium">{{comment.comment}}</p>
          </div>
        }@empty {
          <p class="text-gray-600 mt-4 font-medium text-center text-xl">{{'posts.NoComments' | translate}}</p>
        }

    </div>

    <!-- create comment -->

    <form class="" [formGroup]="createCommentForm" (ngSubmit)="submitComment()">
      <label for="chat" class="sr-only">{{'posts.YourComment' | translate}}</label>

      <div class="bg-[#2b2156] flex items-center px-3 py-2 p-2 rounded-md border md:w-[70%] mx-auto">

        <textarea formControlName="comment"  id="chat" rows="1" class="bg-[#efe7ff] block mx-4 p-2.5 w-full text-sm text-gray-900  rounded-lg border border-gray-300 focus:ring-[#2b2156] focus:border-[#2b2156] placeholder-gray-500" [placeholder]="'posts.CommentPlaceholder' | translate"></textarea>

        <button type="submit" [disabled]="createCommentForm.invalid"  class=" bg-[#2b2156] disabled:text-gray-600 disabled:cursor-no-drop inline-flex justify-center p-2 text-[#efe7ff] rounded-full cursor-pointer hover:bg-gray-400">
        <svg class="w-5 h-5 rotate-90 rtl:-rotate-90" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
          <path d="m17.914 18.594-8-18a1 1 0 0 0-1.828 0l-8 18a1 1 0 0 0 1.157 1.376L8 18.281V9a1 1 0 0 1 2 0v9.281l6.758 1.689a1 1 0 0 0 1.156-1.376Z"/>
        </svg>
        <span class="sr-only">Send comment</span>
        </button>
      </div>
    </form>

  </section>
}
